# Documentation for CyTOF

# Table of Contents
- [Data Processing Workflow](#workflow)
- [Metadata](#metadata)
- [File Uploads](#uploads)
- [Schema](#schema)

## Data Processing Workflow

![CyTOF Workflow](https://static.swimlanes.io/3e5a5709f450be701783d2b2d30ded98.png "CyTOF Workflow")<a name="workflow"></a>

```
Samples -> CD45-barcoded Samples: CD45 antibody conjugated to isotope
CD45-barcoded Samples -> Pooled Samples: Immuno Profiling Panel
Pooled Samples -> Fluidigm CyTOF:  Cell injector + calibration Beads
Fluidigm CyTOF -> Data acquisition software: Pre-processing
Data acquisition software -> Data acquisition software: Bead Normalization
Data acquisition software -> Data acquisition software: Bead Exclusion
Data acquisition software -> Data acquisition software: Enrich for singlets and viable cells
Data acquisition software -> Data acquisition software: CD45 deconvolution
Data acquisition software -> CIDC : CIMAC upload raw FCS files
CIDC -> Astrolable : Standardized processing Pipeline
Astrolable -> Astrolable : Clustering/Analysis
Astrolable -> CIDC : Store processed FCS files
Astrolable -> CIDC : Store Analyzed files
```

## Important Metadata Attributes <a name="metadata"></a>


## Files to be uploaded to CIDC by CIMAC <a name="uploads"></a>

- Raw FCS- Files generated by the CyTOF machine after before
- Normalized FCS- Files generated at CIMAC after bead normalization, bead exclusion and CD45 deconvolution.
- Sample metadata- Tab delimited file with following columns:
    * Filename
    * Sample ID
    * Patient ID
    * Condition (Tumor/Normal)
    * Any additional feature (Timepoint, Treatment etc)
- Experiment metadata
    * Instrument name
    * Panel ID
    * QC
- Processing metadata
   * Normalization algorithm/parameters
   * Bead exclusion algorithm/parameters
   * Barcoding parameters

## Files to be uploaded to CIDC by ASTROLABE <a name="uploads"></a>
- Gated FCS files
- Analysis files
  * plots
  * raw csv

## Data to be stored in CIDC <a name="uploads"></a>
- Metadata:
  * Event count
  * Bead count
  * Cell count
  * Features (Control/Tumor, Treatment, timepoints etc)
 - Cell count data
   * Assignment level : # of B-cells, Basophils etc
   * Profile level: # of B-cells CD45hi, # of B-cells CD45low 
 - Cell Assignment data 
   * Assignment level: Normalized intensity of each channel per cell subset
   * Profile level: Normalized intensity of each channel per cell subset
 - Cell subset frequency 
   * Assignment level
   * Profile level

## Data Schema <a name="schema"></a>

